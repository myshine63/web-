<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<button>add 1</button>
<p>hello tom 0</p>
</body>
<script>
    // 利用闭包实现一个防抖函数,快速多次点击按钮，只会执行一次
    function debounce(fn, wait) {
        let timer = null;
        return function () {
            // 保存函数的参数
            let args = arguments;
            // 保证this的指向
            let self = this;
            //如果定时器存在
            if (timer) {
                // 先清除掉原来的定时器
                clearTimeout(timer);
            }
            // 创建一个新的定时器，去执行函数
            timer = setTimeout(() => {
                fn.apply(self, args)
            }, wait);
        }
    }

    let btn = document.querySelector("button");
    let p = document.querySelector("p");
    let count = 1;
    let handleClick = debounce(function () {
        p.innerText = "hello tom " + count++
    }, 1000);
    btn.onclick = handleClick;
</script>
</html>